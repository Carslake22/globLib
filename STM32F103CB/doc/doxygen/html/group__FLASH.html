<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GlobLib: FLASH</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GlobLib
   </div>
   <div id="projectbrief">HAL and API libraries for MCUs and hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../../../doc/doxygen/html/index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../../../common/doc/doxygen/html/index.html"><span>Common</span></a></li>
      <li><a href="../../../../ATTINY13A/doc/doxygen/html/index.html"><span>ATTINY13A</span></a></li>
      <li><a href="index.html"><span>STM32F103CB</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__FLASH.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FLASH<div class="ingroups"><a class="el" href="group__STM32F103CB.html">STM32F103CB</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This module contains functions for modifing internal flash memory.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:stm32f103cb__flash_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32f103cb__flash_8h.html">stm32f103cb_flash.h</a></td></tr>
<tr class="memdesc:stm32f103cb__flash_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header file for stm32f103cb FLASH. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac01ce0ff891130c424a789f7ef994d91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#gac01ce0ff891130c424a789f7ef994d91">FLASH_clearPage</a> (uint32_t pageNumber)</td></tr>
<tr class="memdesc:gac01ce0ff891130c424a789f7ef994d91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a page (1kb) of flash.  <a href="#gac01ce0ff891130c424a789f7ef994d91">More...</a><br /></td></tr>
<tr class="separator:gac01ce0ff891130c424a789f7ef994d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b81ca388d2802241330cc051796acd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#ga3b81ca388d2802241330cc051796acd7">FLASH_write</a> (uint32_t pageNumber, uint32_t address, uint32_t data)</td></tr>
<tr class="memdesc:ga3b81ca388d2802241330cc051796acd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single word to flash.  <a href="#ga3b81ca388d2802241330cc051796acd7">More...</a><br /></td></tr>
<tr class="separator:ga3b81ca388d2802241330cc051796acd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0782737fa341589dc1683725037d10ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#ga0782737fa341589dc1683725037d10ba">FLASH_writes</a> (uint32_t pageNumber, uint32_t address, uint32_t *data, uint16_t size)</td></tr>
<tr class="memdesc:ga0782737fa341589dc1683725037d10ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write multiple words to flash, address incremented automatically.  <a href="#ga0782737fa341589dc1683725037d10ba">More...</a><br /></td></tr>
<tr class="separator:ga0782737fa341589dc1683725037d10ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59005e08371670b7db2130da0120b72a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#ga59005e08371670b7db2130da0120b72a">FLASH_read</a> (uint32_t pageNumber, uint32_t address)</td></tr>
<tr class="memdesc:ga59005e08371670b7db2130da0120b72a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single word from flash memory.  <a href="#ga59005e08371670b7db2130da0120b72a">More...</a><br /></td></tr>
<tr class="separator:ga59005e08371670b7db2130da0120b72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae191db9b3d8a2f722d2585ea7e5aace5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#gae191db9b3d8a2f722d2585ea7e5aace5">FLASH_reads</a> (uint32_t pageNumber, uint32_t address, uint32_t *data, uint16_t size)</td></tr>
<tr class="memdesc:gae191db9b3d8a2f722d2585ea7e5aace5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read multiple words from flash.  <a href="#gae191db9b3d8a2f722d2585ea7e5aace5">More...</a><br /></td></tr>
<tr class="separator:gae191db9b3d8a2f722d2585ea7e5aace5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafce1f1e40082e2bacd1dca46d2c242e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#gafce1f1e40082e2bacd1dca46d2c242e1">FLASH_readPage</a> (uint32_t pageNumber, uint32_t *data)</td></tr>
<tr class="memdesc:gafce1f1e40082e2bacd1dca46d2c242e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an entire page from flash.  <a href="#gafce1f1e40082e2bacd1dca46d2c242e1">More...</a><br /></td></tr>
<tr class="separator:gafce1f1e40082e2bacd1dca46d2c242e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga270d7ab8a1e8b64dcc14869639b303cb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#ga270d7ab8a1e8b64dcc14869639b303cb">FLASH_pageEmpty</a> (uint32_t pageNumber)</td></tr>
<tr class="memdesc:ga270d7ab8a1e8b64dcc14869639b303cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a given page is empty.  <a href="#ga270d7ab8a1e8b64dcc14869639b303cb">More...</a><br /></td></tr>
<tr class="separator:ga270d7ab8a1e8b64dcc14869639b303cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf575201f28cf042fcd932667d04e95f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FLASH.html#gabf575201f28cf042fcd932667d04e95f">FLASH_firstEmptyPage</a> (void)</td></tr>
<tr class="memdesc:gabf575201f28cf042fcd932667d04e95f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the first empty page is flash.  <a href="#gabf575201f28cf042fcd932667d04e95f">More...</a><br /></td></tr>
<tr class="separator:gabf575201f28cf042fcd932667d04e95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module contains functions for modifing internal flash memory. </p>
<p>The STM32f1x3 has 128kb of programmable flash memory. This space can also be used to store user values at runtime. It has the following restrictions</p>
<ul>
<li>Bits can only be set from 1 to 0. This means each address can only be used once before it needs to be erased.</li>
<li>Erasing is done at a page level, for this device each page is 1kb</li>
<li>The read and write operations block the CPU.</li>
<li>If a new uploaded program can overwrite existing flash data.</li>
</ul>
<p>It can be benificial to occasionally clear all flash memory, this ensures the data occupying the flash memory is being used. This can be acheived with "make erase" from program directory.</p>
<p>Flash memory can only be changed from 1 to 0. This means each location needs to be reset with <a class="el" href="group__FLASH.html#gac01ce0ff891130c424a789f7ef994d91" title="Clear a page (1kb) of flash. ">FLASH_clearPage()</a> before it is writted again.</p>
<p>This module provides access to the flash memory. Typically pages toward the module (pages 120 - 127) should be used. The exact location of the free portion not used by code can be found by looking at the "text" section when the program is compiled.</p>
<p>Each page contains 256 words (32 bit) segments which can be used.</p>
<dl class="section author"><dt>Author</dt><dd>Stuart Ianna </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 2018 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU GPLv3 </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000010">Bug:</a></b></dt><dd>None </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Take note of where data is written. It is possible to overwrite the application code.</dd></dl>
<dl class="section user"><dt>Compilers</dt><dd><ul>
<li>arm-none-eabi-gcc (15:4.9.3+svn231177-1) 4.9.3 20150529 (prerelease)</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Working example. </dt><dd>Notice every time the MCU is flashed or reset the first empty page is incremented by one. This occurs as the program only erases the data needed for the binary. Use "make erase" to clear enitre flash memory of MCU <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="stm32f103cb__core_8h.html">stm32f103cb_core.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;coms128.h&gt;</span></div><div class="line"></div><div class="line">uint32_t readData[3];</div><div class="line">uint32_t writeData[2];</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>){</div><div class="line"></div><div class="line">    uint8_t pageBase;</div><div class="line"></div><div class="line">    <span class="comment">//Serial setup</span></div><div class="line">    <a class="code" href="group__USART.html#ga98048cff4a74b10ceb5e1112c5de1f1f">USART_setup</a>(<a class="code" href="group__USART.html#ggadd3d8e6b8b6b72b4d94db7edb989dc12ad268e22914c93f6f39e46cc38ae21b2d">USART_1</a>);</div><div class="line">    <a class="code" href="group__USART.html#ga45dc7ef6b04acd0fdb33169bc662a492">USART_setBaud</a>(<a class="code" href="group__USART.html#ggadd3d8e6b8b6b72b4d94db7edb989dc12ad268e22914c93f6f39e46cc38ae21b2d">USART_1</a>,<a class="code" href="group__USART.html#gga94d1941d1c4b7d8c9caf52cbc8bd75abab8872f766b21a4fb82167eb0f4bba481">USART_BAUD_115200</a>);</div><div class="line">    COMS(<a class="code" href="group__USART.html#ggadd3d8e6b8b6b72b4d94db7edb989dc12ad268e22914c93f6f39e46cc38ae21b2d">USART_1</a>);</div><div class="line"></div><div class="line">    <span class="comment">//Some random data</span></div><div class="line">    writeData[0] = 456;</div><div class="line">    writeData[1] = 789;</div><div class="line"></div><div class="line">    <span class="comment">//Get the first empty page to use</span></div><div class="line">    pageBase = <a class="code" href="group__FLASH.html#gabf575201f28cf042fcd932667d04e95f">FLASH_firstEmptyPage</a>();</div><div class="line"></div><div class="line">    <span class="comment">//Should check device is not full</span></div><div class="line">    <span class="keywordflow">if</span>(pageBase == 0){</div><div class="line"></div><div class="line">        printl(<span class="stringliteral">&quot;No free pages&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">//Halt here</span></div><div class="line">        <span class="keywordflow">while</span> (1);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">//Print some data to word zero of that page</span></div><div class="line">    <a class="code" href="group__FLASH.html#ga3b81ca388d2802241330cc051796acd7">FLASH_write</a>(pageBase,0,123);</div><div class="line"></div><div class="line">    <span class="comment">//Print some more data to that page, starting at word 1 </span></div><div class="line">    <a class="code" href="group__FLASH.html#ga0782737fa341589dc1683725037d10ba">FLASH_writes</a>(pageBase,1,writeData,<span class="keyword">sizeof</span>(writeData));</div><div class="line"></div><div class="line">    <span class="comment">//Read the data written, starting from word zero</span></div><div class="line">    <a class="code" href="group__FLASH.html#gae191db9b3d8a2f722d2585ea7e5aace5">FLASH_reads</a>(pageBase,0,readData,<span class="keyword">sizeof</span>(readData));</div><div class="line"></div><div class="line">    <span class="comment">//Print out info</span></div><div class="line">    prints(<span class="stringliteral">&quot;First empty page is page&quot;</span>);</div><div class="line">    printl(pageBase);</div><div class="line"></div><div class="line">    printl(<span class="stringliteral">&quot;Data read&quot;</span>);</div><div class="line">    prints(readData[0]);</div><div class="line">    prints(readData[1]);</div><div class="line">    printl(readData[2]);</div><div class="line">    </div><div class="line">    printl(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (1);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac01ce0ff891130c424a789f7ef994d91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a> FLASH_clearPage </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear a page (1kb) of flash. </p>
<p>This needs to be used if the same memory location is used multiple times.</p>
<p>Flash memory can only be changed from 1 to 0. This means each location needs to be reset with <a class="el" href="group__FLASH.html#gac01ce0ff891130c424a789f7ef994d91" title="Clear a page (1kb) of flash. ">FLASH_clearPage()</a> before it is written again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to clear (0-127) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>It is possible to remove application code with this function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error number as defined in <a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c" title="Error enumerators for the Debug peripheral. ">mcu_error</a>, E_FLASH_NOERROR if no error, E_FLASH_PAGE if page is out of range </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00022">22</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="gabf575201f28cf042fcd932667d04e95f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FLASH_firstEmptyPage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the first empty page is flash. </p>
<dl class="section warning"><dt>Warning</dt><dd>This doesn't work in conjuction with the USB bootloader, as if the entire contents were erased, the bootloader would be destroyed.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The first empty page which can be used, returns 0 if no pages are empty. </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00158">158</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga270d7ab8a1e8b64dcc14869639b303cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t FLASH_pageEmpty </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a given page is empty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to check. (0-127) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function doesn't check page bounds </dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>1 if page is empty</li>
<li>0 if page containes data </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00142">142</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga59005e08371670b7db2130da0120b72a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FLASH_read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single word from flash memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to read from. (0-127) </td></tr>
    <tr><td class="paramname">address</td><td>The word in that page (0-255) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data at the given address </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00088">88</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="gafce1f1e40082e2bacd1dca46d2c242e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a> FLASH_readPage </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an entire page from flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to read from. (0-127) </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to a memory container large enough to hold the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>The size of data must be greater than 256 words ie. uint32_t data[256] </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error number as defined in <a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c" title="Error enumerators for the Debug peripheral. ">mcu_error</a>, E_FLASH_NOERROR if no error, E_FLASH_PAGE if page is out of range </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00119">119</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="gae191db9b3d8a2f722d2585ea7e5aace5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a> FLASH_reads </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read multiple words from flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to read from. (0-127) </td></tr>
    <tr><td class="paramname">address</td><td>The word in that page to start from (0-255) </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to a memory container large enough to hold the data </td></tr>
    <tr><td class="paramname">size</td><td>The size of parameter data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>If size is larger than data, a memeory fault will occur </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error number as defined in <a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c" title="Error enumerators for the Debug peripheral. ">mcu_error</a>, E_FLASH_NOERROR if no error, E_FLASH_PAGE if page is out of range </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00096">96</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga3b81ca388d2802241330cc051796acd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a> FLASH_write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a single word to flash. </p>
<p>A word can only be written to a location once before <a class="el" href="group__FLASH.html#gac01ce0ff891130c424a789f7ef994d91" title="Clear a page (1kb) of flash. ">FLASH_clearPage()</a> is used to reset the memory location</p>
<p>It is possible to use a word address greater than 255. This means that the data will be located in the next page.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to write to (0-127) </td></tr>
    <tr><td class="paramname">address</td><td>The word in that page (0-255) </td></tr>
    <tr><td class="paramname">data</td><td>The data to write to the location </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>It is possible to remove application code with this function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error number as defined in <a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c" title="Error enumerators for the Debug peripheral. ">mcu_error</a>, E_FLASH_NOERROR if no error, E_FLASH_PAGE if page is out of range </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00041">41</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga0782737fa341589dc1683725037d10ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c">mcu_error</a> FLASH_writes </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pageNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write multiple words to flash, address incremented automatically. </p>
<p>A word can only be written to a location once before <a class="el" href="group__FLASH.html#gac01ce0ff891130c424a789f7ef994d91" title="Clear a page (1kb) of flash. ">FLASH_clearPage()</a> is used to reset the memory location</p>
<p>It is possible to use a word address greater than 255. This means that the data will be located in the next page.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageNumber</td><td>The page to write to (0-127) </td></tr>
    <tr><td class="paramname">address</td><td>The word in that page (0-255) </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data to write to the location </td></tr>
    <tr><td class="paramname">size</td><td>The size of parameter data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>It is possible to remove application code with this function. </dd>
<dd>
If size is larger than data, a memeory fault will occur </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error number as defined in <a class="el" href="group__DEBUG.html#ga90d6d08ec193c9751b20ce1d143b7f3c" title="Error enumerators for the Debug peripheral. ">mcu_error</a>, E_FLASH_NOERROR if no error, E_FLASH_PAGE if page is out of range </dd></dl>

<p>Definition at line <a class="el" href="stm32f103cb__flash_8c_source.html#l00061">61</a> of file <a class="el" href="stm32f103cb__flash_8c_source.html">stm32f103cb_flash.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
